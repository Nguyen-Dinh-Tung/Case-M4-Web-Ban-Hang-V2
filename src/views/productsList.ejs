<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Admin Dashboard</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="/vendor/feather/feather.css" />
    <link rel="stylesheet" href="/vendor/ti-icons/css/themify-icons.css" />
    <link rel="stylesheet" href="/vendor/css/vendor.bundle.base.css" />
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link
      rel="stylesheet"
      href="/vendor/datatables.net-bs4/dataTables.bootstrap4.css"
    />
    <link rel="stylesheet" href="/vendor/ti-icons/css/themify-icons.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="/js/select.dataTables.min.css"
    />
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="/css/vertical-layout-light/style.css" />
    <!-- endinject -->
    <link rel="shortcut icon" href="/images/favicon.png" />
    <!-- CSS only -->
  </head>
  <body>
    <div class="container-scroller">
      <!-- Navbar -->
      <%- include('./header/dashboardHeader')%>

      <!-- Body -->
      <div class="container-fluid page-body-wrapper">
        <!-- Sidebar -->
        <%- include('./sidebar/dashboardSidebar')%>

        <!-- Content -->
        <div class="main-panel">
          <div class="content-wrapper">
            <div class="row">
              <div class="col-lg-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <% if (message == 'successCreate') { %>
                    <div class="alert alert-success">
                      <strong>Create Product Success!</strong>
                    </div>
                    <% } else if (message == 'successDelete') { %>
                    <div class="alert alert-success">
                      <strong>Delete Product Success!</strong>
                    </div>
                    <% } else if (message == 'successUpdate') { %>
                    <div class="alert alert-success">
                      <strong>Update Product Success!</strong>
                    </div>
                    <% } %>

                    <h4 class="card-title">Products List</h4>
                    <p class="card-description">
                      Danh sách <code>Sản phẩm hiện có</code>
                    </p>
                    <!--Search-->
                    <div class="form-group">
                      <form
                        action="/users/searchProducts"
                        enctype="multipart/form-data"
                        method="post"
                      >
                        <div class="input-group">
                          <input
                            type="text"
                            class="form-control"
                            placeholder="Search"
                            aria-label="Recipient's username"
                            name="keyword"
                          />
                          <div class="input-group-append">
                            <button
                              class="btn btn-sm btn-primary"
                              type="submit"
                            >
                              Search
                            </button>
                          </div>
                        </div>
                      </form>
                    </div>
                    <!--End Search-->
                    <div class="table-responsive pt-3">
                      <table class="table table-bordered">
                        <thead>
                          <tr>
                            <th>#</th>
                            <th>Product Name</th>
                            <th>Category</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th>Description</th>
                            <th></th>
                            <th></th>
                          </tr>
                        </thead>
                        <tbody>
                          <% products.forEach((item,index)=>{ %>
                          <tr>
                            <td><%= index+1%></td>
                            <td><%=item.name%></td>
                            <td><%=item.category%></td>
                            <td><%=item.price%></td>
                            <td><%=item.quantity%></td>
                            <td><%=item.description%></td>
                            <td>
                              <a
                                href="/products/edit/<%=item._id%>"
                                type="button"
                                class="btn btn-primary btn-rounded btn-fw"
                                >Edit</a
                              >
                            </td>
                            <td>
                              <a
                                href="/products/delete/<%=item._id%>"
                                type="button"
                                class="btn btn-danger btn-rounded btn-fw"
                                onclick="confirm(`Are you sure delete this item?`)"
                                >Delete</a
                              >
                            </td>
                          </tr>
                          <%})%>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- content-wrapper ends -->
          <!-- Footer -->
          <%- include('./footer/dashboardFooter')%>
          <!-- partial -->
        </div>

        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->

    <!-- plugins:js -->
    <script src="/vendor/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <script src="/vendor/chart.js/Chart.min.js"></script>
    <script src="/vendor/datatables.net/jquery.dataTables.js"></script>
    <script src="/vendor/datatables.net-bs4/dataTables.bootstrap4.js"></script>
    <script src="/js/dataTables.select.min.js"></script>
    <!-- JavaScript Bundle with Popper -->
    s
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="/js/off-canvas.js"></script>
    <script src="/js/hoverable-collapse.js"></script>
    <script src="/js/template.js"></script>
    <script src="/js/settings.js"></script>
    <script src="/js/todolist.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page-->
    <script src="/js/dashboard.js"></script>
    <script src="/js/Chart.roundedBarCharts.js"></script>
    <!-- End custom js for this page-->
  </body>
</html>
